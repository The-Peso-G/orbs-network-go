FROM golang:1.12.9

RUN apt-get install -y bash

RUN mkdir -p /src/_tmp/processor-artifacts/native-src/ && \
    cd /src/_tmp/processor-artifacts/native-src/ && \
    go mod init native-src && go get github.com/orbs-network/orbs-contract-sdk@v1.0.0

ADD ./_bin/gamma-server /opt/orbs/

WORKDIR /opt/orbs

CMD ./gamma-server
